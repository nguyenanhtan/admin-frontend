<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fastify Cron Job Creator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .form-container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 600px;
        }
        
        h2 {
            margin: 0 0 10px 0;
            color: #333;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 14px;
        }
        
        input[type="text"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 15px;
            transition: border-color 0.3s;
            box-sizing: border-box;
            font-family: inherit;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        input[type="text"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .cron-builder {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .cron-field {
            display: flex;
            flex-direction: column;
        }
        
        .cron-field label {
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .cron-field input {
            padding: 8px;
            font-size: 14px;
        }
        
        .cron-preview {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 16px;
            text-align: center;
            color: #333;
        }
        
        .cron-meaning {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 14px;
            text-align: center;
            color: #1565c0;
        }
        
        .cron-examples {
            background: #fff9e6;
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 13px;
        }
        
        .cron-examples h4 {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 13px;
        }
        
        .cron-examples ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .cron-examples li {
            margin-bottom: 5px;
            color: #666;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 6px;
            display: none;
        }
        
        .result h3 {
            margin: 0 0 15px 0;
            color: #2e7d32;
        }
        
        .result pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 13px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h2>üïê Fastify Cron Job Creator</h2>
        <p class="subtitle">Create scheduled tasks for your Fastify application</p>
        
        <form id="cronForm">
            <div class="form-group">
                <label for="title">Job Title</label>
                <input type="text" id="title" name="title" placeholder="e.g., Daily Database Cleanup" required>
            </div>
            
            <div class="form-group">
                <label for="data">Job Data / Description</label>
                <textarea id="data" name="data" placeholder="Describe what this job does or add any relevant data..." required></textarea>
            </div>
            
            <div class="form-group">
                <label>Cron Pattern Builder</label>
                <div class="cron-builder">
                    <div class="cron-field">
                        <label>Minute</label>
                        <input type="text" id="minute" value="*" maxlength="20">
                    </div>
                    <div class="cron-field">
                        <label>Hour</label>
                        <input type="text" id="hour" value="*" maxlength="20">
                    </div>
                    <div class="cron-field">
                        <label>Day</label>
                        <input type="text" id="day" value="*" maxlength="20">
                    </div>
                    <div class="cron-field">
                        <label>Month</label>
                        <input type="text" id="month" value="*" maxlength="20">
                    </div>
                    <div class="cron-field">
                        <label>Weekday</label>
                        <input type="text" id="weekday" value="*" maxlength="20">
                    </div>
                </div>
                
                <div class="cron-preview">
                    <strong>Pattern:</strong> <span id="cronPattern">* * * * *</span>
                </div>
                
                <div class="cron-meaning" id="cronMeaning">
                    <strong>Meaning:</strong> Runs every minute
                </div>
                
                <div class="cron-examples">
                    <h4>Common Patterns:</h4>
                    <ul>
                        <li><code>*/5 * * * *</code> - Every 5 minutes</li>
                        <li><code>0 * * * *</code> - Every hour</li>
                        <li><code>0 0 * * *</code> - Daily at midnight</li>
                        <li><code>0 9 * * 1</code> - Every Monday at 9 AM</li>
                        <li><code>0 0 1 * *</code> - First day of every month</li>
                    </ul>
                </div>
            </div>
            
            <button type="submit">Generate Fastify Cron Job Code</button>
        </form>
        
        <div class="result" id="result">
            <h3>‚úÖ Generated Code</h3>
            <pre id="generatedCode"></pre>
        </div>
    </div>

    <script>
        const cronInputs = ['minute', 'hour', 'day', 'month', 'weekday'];
        const cronPattern = document.getElementById('cronPattern');
        const cronMeaning = document.getElementById('cronMeaning');
        
        // Convert cron pattern to human-readable meaning
        function getCronMeaning(minute, hour, day, month, weekday) {
            const parts = [];
            
            // Weekday check (has priority)
            if (weekday !== '*') {
                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                const weekdayNum = parseInt(weekday);
                if (!isNaN(weekdayNum) && weekdayNum >= 0 && weekdayNum <= 7) {
                    parts.push(`every ${days[weekdayNum === 7 ? 0 : weekdayNum]}`);
                } else {
                    parts.push(`on weekday pattern: ${weekday}`);
                }
            } else if (day !== '*') {
                if (day.includes('/')) {
                    const interval = day.split('/')[1];
                    parts.push(`every ${interval} days`);
                } else {
                    parts.push(`on day ${day} of the month`);
                }
            } else {
                parts.push('every day');
            }
            
            // Month
            if (month !== '*') {
                const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                               'July', 'August', 'September', 'October', 'November', 'December'];
                const monthNum = parseInt(month);
                if (!isNaN(monthNum) && monthNum >= 1 && monthNum <= 12) {
                    parts.push(`in ${months[monthNum - 1]}`);
                } else {
                    parts.push(`in month pattern: ${month}`);
                }
            }
            
            // Hour
            if (hour === '*') {
                if (minute === '*') {
                    parts.push('every minute');
                } else if (minute.startsWith('*/')) {
                    const interval = minute.split('/')[1];
                    parts.push(`every ${interval} minutes`);
                } else {
                    parts.push(`at minute ${minute} of every hour`);
                }
            } else if (hour.startsWith('*/')) {
                const interval = hour.split('/')[1];
                parts.push(`every ${interval} hours`);
                if (minute !== '*' && minute !== '0') {
                    parts.push(`at minute ${minute}`);
                }
            } else {
                const hourNum = parseInt(hour);
                const minuteNum = parseInt(minute) || 0;
                const time12 = hourNum > 12 ? hourNum - 12 : (hourNum === 0 ? 12 : hourNum);
                const ampm = hourNum >= 12 ? 'PM' : 'AM';
                parts.push(`at ${time12}:${minuteNum.toString().padStart(2, '0')} ${ampm}`);
            }
            
            return 'Runs ' + parts.join(' ');
        }
        
        // Update cron pattern preview
        function updateCronPattern() {
            const minute = document.getElementById('minute').value || '*';
            const hour = document.getElementById('hour').value || '*';
            const day = document.getElementById('day').value || '*';
            const month = document.getElementById('month').value || '*';
            const weekday = document.getElementById('weekday').value || '*';
            
            const pattern = [minute, hour, day, month, weekday].join(' ');
            cronPattern.textContent = pattern;
            
            const meaning = getCronMeaning(minute, hour, day, month, weekday);
            cronMeaning.innerHTML = '<strong>Meaning:</strong> ' + meaning;
        }
        
        // Add event listeners to cron inputs
        cronInputs.forEach(id => {
            document.getElementById(id).addEventListener('input', updateCronPattern);
        });
        
        // Handle form submission
        document.getElementById('cronForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('title').value;
            const data = document.getElementById('data').value;
            const pattern = cronPattern.textContent;
            
            const code = `// ${title}
// ${data}

import Fastify from 'fastify';
import cron from 'node-cron';

const fastify = Fastify({ logger: true });

// Your routes here
fastify.get('/', async (request, reply) => {
  return { status: 'ok' };
});

// Cron Job: ${title}
cron.schedule('${pattern}', () => {
  fastify.log.info('Running cron job: ${title}');
  
  // Your job logic here
  const jobData = {
    title: '${title}',
    description: '${data}',
    executedAt: new Date().toISOString()
  };
  
  console.log('Job Data:', jobData);
  
  // Add your actual job logic here
  // Example: database cleanup, sending emails, generating reports, etc.
});

// Start server
const start = async () => {
  try {
    await fastify.listen({ port: 3000 });
    console.log('Server running on http://localhost:3000');
    console.log('Cron job "${title}" scheduled with pattern: ${pattern}');
  } catch (err) {
    fastify.log.error(err);
    process.exit(1);
  }
};

start();`;
            
            document.getElementById('generatedCode').textContent = code;
            document.getElementById('result').style.display = 'block';
            
            // Scroll to result
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>