<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML Editor with Navigation</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: #222;
      color: white;
      padding: 10px;
      text-align: center;
      font-size: 18px;
    }

    .container {
      flex: 1;
      display: flex;
      height: 100%;
    }

    /* Left Navigation */
    .nav {
      width: 200px;
      background: #f4f4f4;
      border-right: 1px solid #ccc;
      padding: 10px;
      box-sizing: border-box;
    }

    .nav h3 {
      margin-top: 0;
      font-size: 16px;
    }

    .nav button {
      width: 100%;
      padding: 8px;
      margin-bottom: 8px;
      border: none;
      background: #ddd;
      cursor: pointer;
      text-align: left;
    }

    .nav button:hover {
      background: #ccc;
    }

    /* Editor */
    textarea {
      width: 45%;
      height: 100%;
      border: none;
      outline: none;
      padding: 10px;
      font-family: Consolas, monospace;
      font-size: 14px;
      resize: none;
      border-right: 1px solid #ccc;
    }

    /* Preview */
    iframe {
        width: 45%;
      flex: 1;
      height: 100%;
      border: none;
      background: white;
    }
    form{
        flex: 1;
      display: flex;
      height: 100%;
    }
  </style>
</head>
<body>
  <header>EDIT CÁC KINH NGUYỆN</header>

  <div class="container">
    <!-- Navigation -->
    <div class="nav">
      <h3>Nghi Thức</h3>
      <%
    for(let i = 0; i < kinh_nguyen.length;i++){%>
        <span>
            
        <input type="hidden" value="<%= kinh_nguyen[i].html%>" class="html-val"/>
        <button onclick="loadTemplate('<%= kinh_nguyen[i]._id%>', this.previousElementSibling.value)"><%= kinh_nguyen[i].title%></button>
        </span>
    
    <%}%>
        
    </div>

        <!-- Editor -->
        <input type="hidden" name="_id" id="_id"/>
        <input type="hidden" name="title" id="title"/>
        <textarea id="editor" name="html"></textarea>

        <!-- Preview -->
        <iframe id="preview"></iframe>
  </div>

  <script>
    const editor = document.getElementById("editor");
    const preview = document.getElementById("preview");
    const _id = document.getElementById("_id");
    const title = document.getElementById("title");
     
    function updatePreview() {
      const content = editor.value;
      const doc = preview.contentDocument || preview.contentWindow.document;
      doc.open();
      doc.write(content);
      doc.close();
    }

    editor.addEventListener("input", updatePreview);

    function loadTemplate(_id, html) {
      editor.value = html;
      title.value = this.textContent
    _id.value = _id
      updatePreview();
    }

    // Load default template on start
    //loadTemplate('basic');    
  </script>
</body>
</html>
